{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Kosmic Lab K-passport",
  "type": "object",
  "required": [
    "run_id",
    "commit",
    "config_hash",
    "seed",
    "experiment",
    "params",
    "estimators",
    "metrics",
    "timestamp"
  ],
  "properties": {
    "run_id": {"type": "string", "format": "uuid"},
    "commit": {"type": "string"},
    "config_hash": {"type": "string"},
    "seed": {"type": "integer"},
    "experiment": {"type": "string"},
    "universe": {"type": "string"},
    "params": {"type": "object"},
    "estimators": {
      "type": "object",
      "properties": {
        "phi": {"type": "string"},
        "te": {
          "type": "object",
          "properties": {
            "estimator": {"type": "string"},
            "k": {"type": "integer"},
            "lag": {"type": "integer"}
          },
          "required": ["estimator", "k", "lag"]
        }
      },
      "required": ["phi", "te"]
    },
    "metrics": {
      "type": "object",
      "properties": {
        "K": {"type": "number"},
        "TAT": {"type": "number"},
        "Recovery": {"type": "number"},
        "AUC_K": {"type": "number"},
        "TE_macro_micro": {"type": "number"},
        "TE_symmetry": {"type": "number"}
      },
      "required": ["K"]
    },
    "ci": {
      "type": "object",
      "properties": {
        "K_low": {"type": "number"},
        "K_high": {"type": "number"}
      }
    },
    "environment": {"type": "object"},
    "timestamp": {"type": "string", "format": "date-time"}
  }
}
