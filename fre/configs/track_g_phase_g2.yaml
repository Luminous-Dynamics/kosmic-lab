# Track G Phase G2: Extended Training at Optimal Epsilon
# Goal: Cross K > 1.0 through extended training at sweet spot epsilon
# Based on Phase G1 findings: ε=0.05 is optimal balance

experiment:
  name: "track_g_phase_g2_extended"
  description: "Extended training at optimal adversarial strength to approach consciousness threshold"
  output_dir: "logs/track_g/"
  log_jsonl:
    enabled: false
    path: "logs/track_g/episodes/phase_g2.jsonl"

# Phase G2: Extended Training Configuration
phase_g2:
  name: "extended_training"
  
  # Core experimental parameters
  episodes: 1000  # 125x more than G1 (8 episodes per level)
  episode_length: 200  # 4x longer than G1 (50 steps)
  
  # Optimal epsilon from G1 analysis
  epsilon: 0.05  # Best mean K (0.2578) and second-best max K (0.5878)
  
  # Base parameters from Track E best config
  base_params:
    energy_gradient: 0.15
    communication_cost: 0.05
    plasticity_rate: 0.12
    internal_cells: 12
    external_cells: 25
    difficulty: 1.05  # Slight increase from 1.0 + epsilon
  
  # Enhanced learning
  learning:
    algorithm: "gradient_ascent"
    learning_rate: 0.001  # Keep stable
    experience_buffer_size: 100  # Store recent 100 transitions
    batch_update_size: 10  # Update on batches of 10
    exploration_epsilon: 0.1  # Maintain exploration
  
  # Progress tracking
  checkpoints:
    save_every: 50  # Save every 50 episodes
    track_convergence: true
    early_stopping:
      enabled: true
      patience: 200  # Stop if no improvement for 200 episodes
      min_improvement: 0.01  # Minimum K-Index improvement
  
  # Analysis windows
  analysis:
    moving_average_window: 20  # Track 20-episode MA
    convergence_window: 100  # Check convergence over 100 episodes
    report_every: 100  # Progress report every 100 episodes

  # Warm-start / checkpointing (new)
  warm_start:
    load_path: null  # Set to existing Phase G2 checkpoint to resume (e.g. "logs/track_g/checkpoints/phase_g2_latest.json")
    save_path: "logs/track_g/checkpoints/phase_g2_latest.json"
    metadata:
      description: "Phase G2 agent snapshot for reuse by G2+/G3/H"

# Measurement configuration
measurement:
  metrics:
    - "K_Index"
    - "H1_Coherence"
    - "H2_Flourishing"  
    - "H3_Wisdom"
    - "H4_Play"
    - "H5_Interconnection"
    - "H6_Reciprocity"
    - "H7_Progression"
  
  k_index:
    threshold: 1.5  # Ultimate goal
    intermediate_targets:
      - 0.70  # 47% of threshold
      - 0.80  # 53% of threshold
      - 0.90  # 60% of threshold
      - 1.00  # 67% of threshold (Phase G2 target)
      - 1.10  # 73% of threshold
      - 1.20  # 80% of threshold
    track_above_threshold: true
    sustained_threshold: 20  # Count episodes sustaining above each target
  
  harmony_analysis:
    track_correlations: true  # Compute H1-H7 correlations with K-Index
    identify_signatures: true  # Find harmony patterns predicting high K

# Success criteria for Phase G2
success_criteria:
  minimal: 0.80  # 53% of threshold - shows clear improvement
  target: 1.00  # 67% of threshold - major milestone
  stretch: 1.20  # 80% of threshold - close to crossing
  
  # Additional success metrics
  sustained_performance:
    enabled: true
    window: 50  # Sustained over 50 episodes
    threshold: 0.70  # At least K > 0.70 sustained
  
  learning_indicators:
    h3_wisdom_growth: 0.05  # H3 should increase by >0.05
    h7_progression_positive: true  # H7 should be positive on average
    variance_reduction: true  # Variance should decrease over time

# Reproducibility
reproducibility:
  random_seeds: [42, 123, 456]  # Multiple runs
  record_all_runs: true
  save_trajectories: true  # Save full obs/action trajectories for analysis

# Computational estimates
computational:
  estimated_time_hours: 5  # 1,000 episodes × 200 steps
  estimated_storage_mb: 50  # Full results with trajectories
  priority: "high"  # Phase G2 is critical path
